function PL(a){return document.getElementById(a)}var uploader=new plupload.Uploader({runtimes:"gears,html5,browserplus",browse_button:"btn-upload-image",container:"uploader",max_file_size:"10mb",url:"process/index.php?action=upload",multi_selection:false,filters:[{title:"Image Files",extensions:"png,jpeg,jpg,gif"}]});uploader.bind("Init",function(a,b){});uploader.init();uploader.bind("FilesAdded",function(a,c){if(uploader.files.length==2){uploader.removeFile(uploader.files[0])}for(var b in c){}jQuery("#progress-bar").css("width","0%");$("#progress-bar").parent().show();uploader.start()});uploader.bind("UploadProgress",function(a,b){jQuery("#progress-bar").css("width",b.percent+"%")});uploader.bind("FileUploaded",function(a,c,b){plupload.each(b,function(g,f){if(f=="response"){try{var d=jQuery.parseJSON(g);if(d.error==0){$("#progress-bar").css("width","0px");$("#progress-bar").parent().hide();showAlert2("Loading image......");$.mememaker.tools.addpic(d.files.url)}}catch(h){console.log(h)}}})});jQuery(document).ready(function(){$(window).on("beforeunload",function(){});maker_init()});function maker_init(){$.mememakerinit.init("c1","#FFFFFF");$.mememakerinit.toolsinit(".tools");$.mememakerinit.texteditorinit(".text-editor");$.mememakerinit.imageeditorinit(".image-editor");$.mememakerinit.draweditorinit(".draw-editor");if($("#canvas_guid").data("reload")=="1"){}}function save_canvas(c){var d=$("#canvas_guid").val();var b=$("#current-item").data("name");var a=$("#current-item").val();if($("#current-item").val()==""){alert("You don't have to save an empty canvas.");return false}jQuery.ajax({url:""+d,data:{json:c,name:b,product:a},type:"POST",beforeSend:function(e){}}).done(function(f){var e=$.parseJSON(f);if(e.error==1){$("#modal-user").modal();formuser_load()}else{$("#canvas_guid").val(e.data.guid);$("#canvas_guid").data("saved","1");alert("Your progress just saved")}}).fail(function(){})}function reload_canvas(){var a=$("#canvas_guid").val();jQuery.ajax({url:"",data:{guid:a},type:"POST",beforeSend:function(b){}}).done(function(c){var b=$.parseJSON(c);if(b.error==1){}else{$("#current-item").data("name",b.data.name);$("#current-item").val(b.data.product);$.mememaker.reload(b.data.json)}}).fail(function(){})}function templatelist_load(){jQuery.ajax({url:"",type:"GET",beforeSend:function(a){}}).done(function(a){$("#box-template-list").html(a);templatelist_config()}).fail(function(){})}function templatelist_config(){jQuery("#template-list a").off("click");jQuery("#template-list a").click(function(){var b=$(this).data("bg");var a=$(this).data("fg");$.mememaker.tools.newtemplate(a);$.mememaker.tools.backgroundcolor("#DDDDDD");$("#current-item").val($(this).data("guid"));$("#current-item").data("name",$(this).data("name"));$.shoppingcart.setCurrentProductId($(this).data("guid"));$("#btn-order span").text("Order Now "+$(this).data("price")+"$")})}function order_config(){jQuery("#btn-cart").click(function(){var a=null;a=jQuery("#modal-preview #product-info").data("guid");var b=jQuery("#modal-preview #product-info").data("file");$.shoppingcart.set(a+"-"+b);jQuery("#modal-preview").modal("hide");window.open("","_blank");window.focus()})}function order(){if(jQuery.trim(jQuery("#current-item").val())==""){return}$.mememaker.tools.preview(preview);return}function preview(a){if(jQuery.trim(jQuery("#current-item").val())==""){return}jQuery("#modal-preview .modal-body").html('<div class="ajax-loading-indicator hide" style=""><a href="javascript:" style="font-size:14px;"><i class="icon-refresh icon-spin"></i> Loading ....</a></div>');jQuery(".ajax-loading-indicator").show(0);jQuery("#modal-preview").modal();jQuery.ajax({url:"",data:{"image-extension":"jpeg","image-data":a,user:$.shoppingcart.getuuid(),product:jQuery("#current-item").val()},type:"POST",beforeSend:function(b){}}).done(function(b){jQuery(".ajax-loading-indicator").hide(0);jQuery("#modal-preview .modal-body").html(b);order_config();order_current()}).fail(function(){jQuery(".ajax-loading-indicator").hide(0)})}function order_current(){var a=null;a=jQuery("#modal-preview #product-info").data("guid");var b=jQuery("#modal-preview #product-info").data("file");$.shoppingcart.setCurrentProductId(a+"-"+b);return true}function formuser_load(){jQuery.ajax({url:"",type:"GET",beforeSend:function(a){}}).done(function(a){$("#modal-user .modal-body").html(a)}).fail(function(){jQuery(".ajax-loading-indicator").hide(0)})}function signup_submit(){jQuery.ajax({url:"",data:$("#form-signup").serialize(),type:"POST",beforeSend:function(a){$("#btn-signup").button("loading")}}).done(function(b){$("#btn-signup").button("reset");var a=$.parseJSON(b);if(a.error==1){$("#form-signup .text-error").html(a.message)}else{$("#modal-user").modal("hide");alert("Now click 'save'to save your progress")}}).fail(function(){})}function signin_submit(){jQuery.ajax({url:"",data:$("#form-signin").serialize(),type:"POST",beforeSend:function(a){$("#btn-signin").button("loading")}}).done(function(b){$("#btn-signin").button("reset");var a=$.parseJSON(b);if(a.error==1){$("#form-signin .text-error").html(a.message)}else{$("#modal-user").modal("hide");alert("Now click 'save'to save your progress")}}).fail(function(){})}function showAlert(a){$("#box-alert .body").html(a);$("#box-alert").show();window.setTimeout(function(){$("#box-alert").hide(100)},5000)}function showAlert2(a){$("#box-alert .body").html(a);$("#box-alert").show()}function hideAlert(a){$("#box-alert").hide()};